# /

fragment SolutionIdentifier on SolutionIdentifier {
  exerciseId
  correctionStatus
}

fragment ExerciseIdentifier on Exercise {
  id
  title
}

query Home {
  exercises {
    ...ExerciseIdentifier
  }
  mySolutions {
    ...SolutionIdentifier
  }
}

# /createExercise

mutation CreateExercise($exerciseInput: ExerciseInput!) {
  createExercise(exerciseInput: $exerciseInput)
}

# /exercises/:exerciseId

fragment ExerciseOverview on Exercise {
  title
  text
  userSolutions {
    username
    correctionStatus
    reviewUuid
  }
}

query ExerciseOverview($exerciseId: Int!) {
  exercise(exerciseId: $exerciseId) {
    ...ExerciseOverview
  }
}

mutation InitiateCorrection($username: String!, $exerciseId: Int!) {
  exerciseMutations(exerciseId: $exerciseId) {
    userSolution(username: $username) {
      initiateCorrection
    }
  }
}

# /exercise/:exerciseId/solutions/submit

query ExerciseTaskDefinition($exerciseId: Int!) {
  exercise(exerciseId: $exerciseId) {
    ...ExerciseTaskDefinition
  }
}

fragment ExerciseTaskDefinition on Exercise {
  title
  text
}

mutation SubmitSolution($exerciseId: Int!, $userSolution: UserSolutionInput!) {
  exerciseMutations(exerciseId: $exerciseId) {
    submitSolution(userSolution: $userSolution)
  }
}

# /correctionReview/:reviewUuid

query CorrectionReview($exerciseId: Int!) {
  reviewCorrection(exerciseId: $exerciseId) {
    userSolution {
      ...FlatUserSolutionNode
    }
    sampleSolution {
      ...IFlatSolutionNode
    }
    matches {
      ...SolutionNodeMatch
    }

  }
}
