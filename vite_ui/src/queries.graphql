# /

fragment SolutionIdentifier on SolutionIdentifier {
  exerciseId
  exerciseTitle
  correctionFinished
}

fragment ExerciseIdentifier on Exercise {
  id
  title
}

query Home {
  exercises {
    ...ExerciseIdentifier
  }
  mySolutions {
    ...SolutionIdentifier
  }
}

# /createExercise

mutation CreateExercise($exerciseInput: ExerciseInput!) {
  createExercise(exerciseInput: $exerciseInput)
}

# /exercises/:exerciseId

fragment ExerciseOverview on Exercise {
  title
  text
  userSolutions {
    username
    correctionFinished
  }
}

query ExerciseOverview($exerciseId: Int!) {
  exercise(exerciseId: $exerciseId) {
    ...ExerciseOverview
  }
}

# /exercise/:exerciseId/solutions/submit

query ExerciseTaskDefinition($exerciseId: Int!) {
  exercise(exerciseId: $exerciseId) {
    ...ExerciseTaskDefinition
  }
}

fragment ExerciseTaskDefinition on Exercise {
  title
}

mutation SubmitSolution($exerciseId: Int!, $userSolution: UserSolutionInput!) {
  exerciseMutations(exerciseId: $exerciseId) {
    submitSolution(userSolution: $userSolution) {
      __typename
    }
  }
}

# TODO url!: /exercise/...

fragment ReviewData on ReviewData {
  userSolution {
    ...FlatUserSolutionNode
  }
  sampleSolution {
    ...SolutionNode
  }
  matches {
    ...SolutionNodeMatch
  }
  comment
  points
}

query CorrectionReview($exerciseId: Int!) {
  reviewCorrection(exerciseId: $exerciseId) {
    ...ReviewData
  }
}

# /correctionReview/:reviewUuid

query CorrectionReviewByUuid($uuid: String!) {
  reviewCorrectionByUuid(uuid: $uuid) {
    ...ReviewData
  }
}
