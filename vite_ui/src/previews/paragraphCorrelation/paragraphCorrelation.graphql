fragment ParagraphCorrelationCitation on ParagraphCitation {
  ...ParagraphCitation
  identifier {
    ...ParagraphSynonymIdentifier
  }
}

fragment ParagraphCorrelationCitationLocation on ParagraphCitationLocation {
  from
  to
  citedParagraphs {
    ...ParagraphCorrelationCitation
  }
}

fragment ParagraphCorrelationSolNode on SolutionNode {
  id
  childIndex
  text
  isSubText
  applicability
  parentId
  paragraphCitationLocations {
    ...ParagraphCorrelationCitationLocation
  }
}
# data for exercise

query ParagraphCorrelationExerciseData($exerciseId: Int!) {
  exercise(exerciseId: $exerciseId) {
    title
    sampleSolutionNodes: sampleSolution {
      ...ParagraphCorrelationSolNode
    }
    usernames: userSolutions {
      username
    }
  }
}

# data for user solution

fragment ParagraphCorrelation on ParagraphCorrelation {
  paragraph {
    ...ParagraphSynonymIdentifier
  }
  sampleNodeIds
  userNodeIds
}

query ParagraphCorrelationUserSolution($exerciseId: Int!, $username: String!) {
  exercise(exerciseId: $exerciseId) {
    userSolution(username: $username) {
      userSolutionNodes: nodes {
        ...ParagraphCorrelationSolNode
      }
      paragraphCorrelations {
        ...ParagraphCorrelation
      }
    }
  }
}
